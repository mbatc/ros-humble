diff --git a/rmw_wasm_cpp/CMakeLists.txt b/rmw_wasm_cpp/CMakeLists.txt
index 9069d62..6197f60 100644
--- a/rmw_wasm_cpp/CMakeLists.txt
+++ b/rmw_wasm_cpp/CMakeLists.txt
@@ -83,11 +83,8 @@ ament_target_dependencies(${PROJECT_NAME}
   rmw
   wasm_cpp
   rcpputils
-  rcutils
   dynmsg
-  rosidl_runtime_c
   rosidl_runtime_cpp
-  rosidl_typesupport_introspection_c
   rosidl_typesupport_introspection_cpp
 )
 
@@ -96,11 +93,8 @@ ament_export_dependencies(
   rmw
   wasm_cpp
   rcpputils
-  rcutils
   dynmsg
-  rosidl_runtime_c
   rosidl_runtime_cpp
-  rosidl_typesupport_introspection_c
   rosidl_typesupport_introspection_cpp
 )
 
diff --git a/wasm_cpp/cmake/WasmBuildOptions.cmake b/wasm_cpp/cmake/WasmBuildOptions.cmake
index 0b8ed3a..87c4fbe 100644
--- a/wasm_cpp/cmake/WasmBuildOptions.cmake
+++ b/wasm_cpp/cmake/WasmBuildOptions.cmake
@@ -9,7 +9,7 @@ endfunction()
 function(wasm_link_options target)
     target_link_options("${target}"
         PUBLIC "SHELL: -lembind"
-        PUBLIC "SHELL: --pre-js ${CMAKE_SOURCE_DIR}/pre.js"
+        PUBLIC "SHELL: --pre-js ${CMAKE_SOURCE_DIR}/src/pre.js"
         PUBLIC "SHELL: -fexceptions"
         PUBLIC "SHELL: -s ASYNCIFY=1"
         PUBLIC "SHELL: -s ALLOW_MEMORY_GROWTH=1"
